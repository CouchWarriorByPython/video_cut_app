# Video Annotation System

–°–∏—Å—Ç–µ–º–∞ –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥–µ–æ –∑ Azure Storage, —Ä–æ–∑–º—ñ—Ç–∫–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ–≤ —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ —á–µ—Ä–µ–∑ Celery.

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Frontend**: Vanilla JS, HTML, CSS
- **Backend**: FastAPI, Celery, Redis
- **Database**: MongoDB
- **Storage**: Azure Blob Storage
- **Video Processing**: FFmpeg
- **Container**: Docker
- **Video annotation**: CVAT

## üìã –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

- Docker —ñ Docker Compose
- `.env` —Ñ–∞–π–ª (–æ—Ç—Ä–∏–º–∞—Ç–∏ —É dmytrobuz@pro-esupplies.com)

## ‚ö° –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

```bash
# –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
git clone git@github.com:gtakontur/video-pre-annotator.git
cd video-annotation-system

# –†–æ–∑–º—ñ—Å—Ç–∏—Ç–∏ .env —Ñ–∞–π–ª –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É

# –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤ –≤–ø–µ—Ä—à–µ
docker compose up --build

# –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤ —è–∫—â–æ –≤–∂–µ –∑–∞–ø—É—Å–∫–∞–ª–∏ –¥–æ —Ü—å–æ–≥–æ
docker compose up
```

## üåê –î–æ—Å—Ç—É–ø–Ω—ñ —Å–µ—Ä–≤—ñ—Å–∏

| –°–µ—Ä–≤—ñ—Å | URL | –û–ø–∏—Å |
|--------|-----|------|
| **–í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å** | http://localhost:8000 | –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥–µ–æ |
| **API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è** | http://localhost:8000/docs | FastAPI Swagger UI |
| **Mongo Express** | http://localhost:8081 | –í–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å MongoDB |
| **Flower** | http://localhost:5555 | –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ Celery –∑–∞–¥–∞—á |

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ api/               # FastAPI endpoints
‚îÇ   ‚îú‚îÄ‚îÄ background_tasks/  # Celery –∑–∞–¥–∞—á—ñ
‚îÇ   ‚îú‚îÄ‚îÄ config/           # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ database/         # MongoDB —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ models/           # Pydantic –º–æ–¥–µ–ª—ñ
‚îÇ   ‚îú‚îÄ‚îÄ services/         # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îî‚îÄ‚îÄ utils/            # –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
‚îú‚îÄ‚îÄ front/                # Frontend —Ñ–∞–π–ª–∏
‚îú‚îÄ‚îÄ docker/               # Docker –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ temp/                 # –¢–∏–º—á–∞—Å–æ–≤—ñ —Ñ–∞–π–ª–∏ (—Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
‚îî‚îÄ‚îÄ logs/                 # –õ–æ–≥–∏ (—Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
```

## üéØ –û—Å–Ω–æ–≤–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

1. **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—ñ–¥–µ–æ**
   - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –≤—ñ–¥–µ–æ –∑–∞ Azure Blob URL
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–∏–π —Å–µ—Ä–≤–µ—Ä

2. **–†–æ–∑–º—ñ—Ç–∫–∞ –≤—ñ–¥–µ–æ**
   - –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —á–∞—Å–æ–≤–∏—Ö –º—ñ—Ç–æ–∫ –¥–ª—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ–≤
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫—ñ–ª—å–∫–æ—Ö –ø—Ä–æ—î–∫—Ç—ñ–≤: Motion Detection, Tracking, Mil Hardware, Re-ID
   - –î–æ–¥–∞–≤–∞–Ω–Ω—è –º–µ—Ç–∞–¥–∞–Ω–∏—Ö (—Ç–∏–ø –¥—Ä–æ–Ω—É, –∫–æ–Ω—Ç–µ–Ω—Ç, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏)

3. **–û–±—Ä–æ–±–∫–∞ —á–µ—Ä–µ–∑ Celery**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –Ω–∞—Ä—ñ–∑–∫–∞ –≤—ñ–¥–µ–æ –Ω–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏
   - –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–ª—ñ–ø—ñ–≤ –Ω–∞–∑–∞–¥ –≤ Azure Storage
   - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–¥–∞—á –≤ CVAT –¥–ª—è –∞–Ω–æ—Ç—É–≤–∞–Ω–Ω—è

## üîß –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–æ—é

### –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
```bash
# –í—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏
docker compose logs

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Å–µ—Ä–≤—ñ—Å
docker compose logs app
docker compose logs celery-worker
```

### –ó—É–ø–∏–Ω–∫–∞ —Å–µ—Ä–≤—ñ—Å—ñ–≤
```bash
docker compose down -v
```

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

- **Flower** - –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è Celery –∑–∞–¥–∞—á –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- **Logs** - –¥–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏ –≤ –ø–∞–ø—Ü—ñ `logs/`
- **MongoDB** - –ø–µ—Ä–µ–≥–ª—è–¥ –¥–∞–Ω–∏—Ö —á–µ—Ä–µ–∑ Mongo Express

## ‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ

- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –¥–æ–¥–∞–ª–∏ .env —Ñ–∞–π–ª –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ—î–∫—Ç—É